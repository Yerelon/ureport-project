<!DOCTYPE html>
<meta charset="utf-8">
<style>

.chart {
    background-color: steelblue;
}
.chart rect {
  fill: steelblue;
}

.chart text {
  fill: white;
  font: 10px sans-serif;
  text-anchor: middle;
}
</style>


<script src="http://d3js.org/d3.v3.min.js"></script>

<body>
    {% if object_list %}
        <h1>Object List exist</h1>
        <svg class="chart"></svg>
    {% endif %}
<script>



    var JSONData = {{ object_list.content|safe }}

    var width = 960,
        height = JSONData.length;
    var x = d3.scale.ordinal()
        .rangeRoundBands([0, width], .1);
    var y = d3.scale.linear()
        .range([height, 0]);
    var chart = d3.select("body").append("svg")
        .attr("width", width)
        .attr("height", height);
    d3.json(JSONData,
        function(err, data) {
            x.domain([d3.max(JSONData, function(d){
                return d.fields.group
                        })]);
    var barWidth = width / JSONData.fields.length;

    var bar = chart.selectAll("g")
        .data(JSONData)
        .enter().append("g")
        .attr("transform", function(d, i) { return "translate(" + i * barWidth + ",0)"; });
    bar.append("rect")
      .attr("y", function(d) { return y(d.value); })
      .attr("height", function(d) { return height - y(d.value); })
      .attr("width", barWidth - 1);

    bar.append("text")
      .attr("x", barWidth / 2)
      .attr("y", function(d) { return y(d.value) + 3; })
      .attr("dy", ".75em")
      .text(function(d) { return d.value; });
    });

</script>
</body>
